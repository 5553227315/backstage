(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c152f9d"],{"0b42":function(t,e,a){var s=a("da84"),i=a("e8b5"),r=a("68ee"),o=a("861d"),n=a("b622"),l=n("species"),c=s.Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,r(e)&&(e===c||i(e.prototype))?e=void 0:o(e)&&(e=e[l],null===e&&(e=void 0))),void 0===e?c:e}},"159b":function(t,e,a){var s=a("da84"),i=a("fdbc"),r=a("785a"),o=a("17c2"),n=a("9112"),l=function(t){if(t&&t.forEach!==o)try{n(t,"forEach",o)}catch(e){t.forEach=o}};for(var c in i)i[c]&&l(s[c]&&s[c].prototype);l(r)},"17c2":function(t,e,a){"use strict";var s=a("b727").forEach,i=a("a640"),r=i("forEach");t.exports=r?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},"65f0":function(t,e,a){var s=a("0b42");t.exports=function(t,e){return new(s(t))(0===e?0:e)}},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){return 1},1)}))}},b727:function(t,e,a){var s=a("0366"),i=a("e330"),r=a("44ad"),o=a("7b0b"),n=a("07fa"),l=a("65f0"),c=i([].push),d=function(t){var e=1==t,a=2==t,i=3==t,d=4==t,h=6==t,u=7==t,f=5==t||h;return function(p,m,g,y){for(var x,b,v=o(p),S=r(v),w=s(m,g),D=n(S),_=0,k=y||l,C=e?k(p,D):a||u?k(p,0):void 0;D>_;_++)if((f||_ in S)&&(x=S[_],b=w(x,_,v),t))if(e)C[_]=b;else if(b)switch(t){case 3:return!0;case 5:return x;case 6:return _;case 2:c(C,x)}else switch(t){case 4:return!1;case 7:c(C,x)}return h?-1:i||d?d:C}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},d088:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"flex","flex-direction":"row"}},[a("div",{staticStyle:{display:"flex",flex:"1","flex-direction":"column","align-items":"center"}},[a("div",{staticStyle:{margin:"20px","font-size":"40px","font-weight":"600"},style:{color:t.color}},[t._v(t._s(t.cinemaName)+"-"+t._s(t.hallNumber)+"-"+t._s(t.cinemaType))]),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isReopen,expression:"isReopen"}],staticStyle:{"margin-top":"200px",width:"200px",height:"60px","font-size":"25px","border-radius":"15px"},attrs:{type:"warning",plain:""},on:{click:t.reopen}},[t._v("初始化座椅")]),a("div",{staticStyle:{display:"flex","flex-direction":"row"}},[a("div",{staticStyle:{width:"40px",margin:"8px"}}),t._l(t.XLenght,(function(e){return a("div",{staticStyle:{width:"40px",margin:"8px",display:"flex","justify-content":"center"}},[t._v(t._s(e))])}))],2),t._l(t.seatData,(function(e,s){return a("div",{key:s,ref:"back_box",refInFor:!0,staticStyle:{display:"flex","flex-direction":"row"}},[a("div",{staticStyle:{width:"40px",margin:"8px",display:"flex","flex-direction":"row-reverse","align-items":"center"}},[t._v(t._s(s+1))]),t._l(e,(function(e){return a("div",{staticStyle:{margin:"8px",width:"40px",height:"40px","border-radius":"5px",border:"3px solid"},style:{borderColor:e.seatColor,backgroundColor:3===e.seatState?"rgb(224, 224, 224)":"#fff"},on:{mouseover:function(a){return t.seatSelect(e)}}})}))],2)}))],2)]),a("div",{staticStyle:{display:"flex","flex-direction":"column","border-left":"1px solid #a7a7a7","padding-left":"20px"}},[a("span",{staticClass:"m-10",staticStyle:{color:"#555"}},[t._v("按住Ctrl键滑动鼠标即可选择")]),a("transition",{attrs:{name:"domActive"}},[0===t.seatState?a("div",{staticStyle:{margin:"0 10px",padding:"15px 0",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",border:"1px solid #9d9d9d","border-radius":"10px"}},[a("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"center",width:"180px","margin-bottom":"15px","padding-left":"15px",border:"1px solid #d0d0d0","border-radius":"5px"}},[a("span",{staticStyle:{"font-size":"13px",color:"#666","margin-right":"15px",flex:"1"}},[t._v("选择座椅颜色")]),a("el-color-picker",{attrs:{"show-alpha":"",predefine:t.predefineColors},on:{change:t.state0},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1),a("el-input",{staticStyle:{width:"180px"},attrs:{"aria-required":"true",placeholder:"请输入座椅类型"},model:{value:t.seatType,callback:function(e){t.seatType=e},expression:"seatType"}})],1):t._e()]),a("el-button",{staticClass:"m-10",style:{backgroundColor:0===t.seatState?"#409eff":"",color:0===t.seatState?"#fff":""},attrs:{size:"medium"},on:{click:t.state0}},[t._v("选择可用")]),a("el-button",{staticClass:"m-10",style:{backgroundColor:3===t.seatState?"#409eff":"",color:3===t.seatState?"#fff":""},attrs:{size:"medium"},on:{click:t.isBan}},[t._v("选择禁用")]),a("el-button",{staticClass:"m-10",style:{backgroundColor:2===t.seatState?"#409eff":"",color:2===t.seatState?"#fff":""},attrs:{size:"medium"},on:{click:t.isEmpty}},[t._v("选择空位")]),a("div",{staticClass:"m-10",staticStyle:{width:"200px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",border:"1px solid #666","border-radius":"10px"}},[a("div",{staticStyle:{display:"flex",width:"100%","flex-direction":"column","justify-content":"center","align-items":"center",padding:"9px","border-bottom":"1px solid #666","border-radius":"10px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"success",size:"medium"},on:{click:t.addTop}},[t._v("TOP+")]),a("el-button",{staticStyle:{width:"100%","margin-top":"5px","margin-left":"0"},attrs:{type:"danger",size:"medium"},on:{click:t.reTop}},[t._v("TOP-")])],1),a("div",{staticStyle:{width:"100%",display:"flex","flex-direction":"row","justify-content":"center",margin:"10px 0","border-top":"1px solid #666","border-bottom":"1px solid #666","border-radius":"10px"}},[a("div",{staticStyle:{flex:"1",display:"flex","flex-direction":"column",padding:"5px 5px 5px 9px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"success",size:"medium"},on:{click:t.addLeft}},[t._v("L+")]),a("el-button",{staticStyle:{width:"100%","margin-top":"5px","margin-left":"0"},attrs:{type:"danger",size:"medium"},on:{click:t.reLeft}},[t._v("L-")])],1),a("div",{staticStyle:{flex:"1",display:"flex","flex-direction":"column",padding:"5px 9px 5px 5px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"success",size:"medium"},on:{click:t.addRight}},[t._v("R+")]),a("el-button",{staticStyle:{width:"100%","margin-top":"5px","margin-left":"0"},attrs:{type:"danger",size:"medium"},on:{click:t.reRight}},[t._v("R-")])],1)]),a("div",{staticStyle:{display:"flex",width:"100%","flex-direction":"column","justify-content":"center","align-items":"center",padding:"9px","border-top":"1px solid #666","border-radius":"10px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"success",size:"medium"},on:{click:t.addBottom}},[t._v("BOTTOM+")]),a("el-button",{staticStyle:{width:"100%","margin-left":"0","margin-top":"5px"},attrs:{type:"danger",size:"medium"},on:{click:t.reBottom}},[t._v("BOTTOM-")])],1)]),a("el-button",{staticClass:"m-10",staticStyle:{width:"200px"},attrs:{type:"success",size:"medium"},on:{click:t.saveSeat}},[t._v("上传保存")]),a("el-button",{staticClass:"m-10",staticStyle:{width:"200px"},attrs:{type:"warning",size:"medium"},on:{click:t.reSeat}},[t._v("恢复")]),a("el-button",{staticClass:"m-10",staticStyle:{width:"200px"},attrs:{type:"warning",size:"medium"},on:{click:t.reEmpty}},[t._v("清空")]),a("el-button",{staticClass:"m-10",staticStyle:{width:"200px"},attrs:{type:"info",size:"medium"},on:{click:t.back}},[t._v("返回")])],1)])},i=[],r=(a("d3b7"),a("159b"),{name:"Seat",data:function(){return{hallId:"",isReopen:"",XLenght:0,YLenght:0,seatData:[],total:0,seatColor:"#d2d2d2",seatState:2,seatXNumber:0,seatYNumber:0,seatType:"",color:"rgba(170, 138, 126, 1)",predefineColors:["rgba(170, 138, 126, 1)","#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"]}},created:function(){this.hallId=this.$route.query.hallId,this.cinemaName=this.$route.query.cinemaName,this.hallNumber=this.$route.query.hallNumber,this.cinemaType=this.$route.query.cinemaType,this.seatType=this.cinemaType.substring(0,this.cinemaType.length-1)+"座",console.log(this.hallId),this.load()},methods:{seatSelect:function(t){var e=window.event;e.ctrlKey&&(console.log("ctrlKey:"+e.ctrlKey),t.seatColor=this.seatColor,t.seatState=this.seatState,t.seatType=this.seatType,console.log(t))},state0:function(){this.seatColor=this.color,this.seatState=0},isBan:function(){this.seatColor="#d2d2d2",this.seatState=3},isEmpty:function(){this.seatColor="#d2d2d2",this.seatState=2},addTop:function(){for(var t=this.seatData[0][0].seatY+1,e=this.seatData[0][0].seatX,a=this.seatData[0].length,s=[],i=0;i<a;i++){var r={hallId:this.hallId,hallNumber:this.hallNumber,seatX:e,seatY:t,seatColor:"#d2d2d2",seatState:2};e+=1,s.push(r)}this.seatData.length<15?this.seatData.unshift(s):this.$message.error("最多不超过15行")},reTop:function(){this.seatData.length>1?this.seatData.shift():this.$message.error("最少保留1行")},addBottom:function(){for(var t=this.seatData.length-1,e=this.seatData[t][0].seatY-1,a=this.seatData[t][0].seatX,s=[],i=this.seatData[0].length,r=0;r<i;r++){var o={hallId:this.hallId,hallNumber:this.hallNumber,seatX:a,seatY:e,seatColor:"#d2d2d2",seatState:2};a+=1,s.push(o)}this.seatData.length<15?this.seatData.push(s):this.$message.error("最多不超过15行")},reBottom:function(){this.seatData.length>1?this.seatData.pop():this.$message.error("最少保留一行")},addLeft:function(){var t=this,e=this.seatData[0][0].seatY,a=this.seatData[0][0].seatX-1;this.seatData[0].length<24?(this.XLenght=this.XLenght+1,this.seatData.forEach((function(s){var i={hallId:t.hallId,hallNumber:t.hallNumber,seatX:a,seatY:e,seatColor:"#d2d2d2",seatState:2};e-=1,s.unshift(i)}))):this.$message.error("最多不超过24列")},reLeft:function(){this.seatData[0].length>1?(this.XLenght=this.XLenght-1,this.seatData.forEach((function(t){t.shift()}))):this.$message.error("最少保留1列")},addRight:function(){var t=this,e=this.seatData[0].length-1,a=this.seatData[0][e].seatY,s=this.seatData[0][e].seatX+1;this.seatData[0].length<24?(this.XLenght=this.XLenght+1,this.seatData.forEach((function(e){var i={hallId:t.hallId,hallNumber:t.hallNumber,seatX:s,seatY:a,seatColor:"#d2d2d2",seatState:2};a-=1,e.push(i)}))):this.$message.error("最多不超过24列")},reRight:function(){this.seatData[0].length>1?(this.XLenght=this.XLenght-1,this.seatData.forEach((function(t){t.pop()}))):this.$message.error("最少保留一列")},back:function(){this.$router.push({path:"/hall"})},reopen:function(){var t=this;this.request("/seat/setSeat",{params:{hallId:this.hallId,hallNumber:this.hallNumber}}).then((function(e){"200"===e.code?(t.$message.success(e.msg),t.load()):t.$message.error(e.msg)}))},load:function(){var t=this;this.request("/seat/hallId",{params:{hallId:this.hallId}}).then((function(e){console.log(e),"404"===e.code?(t.$message.error(e.msg),t.isReopen=!0):(t.isReopen=!1,e.data.forEach((function(e){t.YLenght=t.YLenght+1,e.forEach((function(e){e.backgroundColor="#fff",t.XLenght=t.XLenght+1}))})),t.XLenght=t.XLenght/t.YLenght,t.seatData=e.data,t.total=e.data.length)}))},reSeat:function(){this.seatType=this.cinemaType.substring(0,this.cinemaType.length-1)+"座",this.YLenght=0,this.XLenght=0,this.load()},reEmpty:function(){this.seatData.forEach((function(t){t.forEach((function(t){t.seatColor="#d2d2d2",t.seatState=2,t.seatType=""}))}))},saveSeat:function(){var t=this,e=[];this.seatData.forEach((function(t){t.forEach((function(t){e.push(t)}))})),console.log(e),this.request.post("/seat",e).then((function(e){"200"===e.code?(console.log(e),t.$message.success(e.msg),t.load()):(console.log(e),t.$message.error(e.msg),t.load())}))}}}),o=r,n=a("2877"),l=Object(n["a"])(o,s,i,!1,null,"ef80fa66",null);e["default"]=l.exports},e8b5:function(t,e,a){var s=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}}}]);
//# sourceMappingURL=chunk-7c152f9d.44ae6d1f.js.map